<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CRUD Operations - MongoDB PHP library</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "CRUD Operations";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../pretty.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> MongoDB PHP library</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/">Getting Started</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../upgrade-guide/">Upgrade Guide</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorial</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">CRUD Operations</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#crud-operations">CRUD Operations</a></li>
                
                    <li><a class="toctree-l4" href="#querying">Querying</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../commands/">Database Commands</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../indexes/">Indexes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../example-data/">Example Data</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Classes</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../classes/client/">Client</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../classes/database/">Database</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../classes/collection/">Collection</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">MongoDB PHP library</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tutorial &raquo;</li>
        
      
    
    <li>CRUD Operations</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/mongodb/mongo-php-library" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="crud-operations">CRUD Operations<a class="headerlink" href="#crud-operations" title="Permanent link">&para;</a></h1>
<p>CRUD is an acronym for Create, Read, Update, and Delete. These operations may be
performed via the <a href="../../classes/collection/">MongoDB\Collection</a> class, which implements
MongoDB&rsquo;s cross-driver <a href="https://github.com/mongodb/specifications/blob/master/source/crud/crud.rst">CRUD specification</a>. This page will
demonstrate how to insert, query, update, and delete documents using the
library. A general introduction to CRUD operations in MongoDB may be found in
the <a href="https://docs.mongodb.org/manual/crud/">MongoDB Manual</a>.</p>
<h2 id="querying">Querying<a class="headerlink" href="#querying" title="Permanent link">&para;</a></h2>
<h3 id="finding-one-document">Finding One Document<a class="headerlink" href="#finding-one-document" title="Permanent link">&para;</a></h3>
<p>The <a href="../../classes/collection/#findone">findOne()</a> method returns the first matched document, or null if
no document was matched. By default, the library returns BSON documents and
arrays as MongoDB\Model\BSONDocument and MongoDB\Model\BSONArray objects,
respectively. Both of those classes extend PHP&rsquo;s <a href="http://php.net/arrayobject">ArrayObject</a>
class and implement the driver&rsquo;s <a href="http://php.net/mongodb-bson-serializable">MongoDB\BSON\Serializable</a> and
<a href="http://php.net/mongodb-bson-unserializable">MongoDB\BSON\Unserializable</a> interfaces.</p>
<pre><code>&lt;?php

$collection = (new MongoDB\Client)-&gt;demo-&gt;zips;

$document = $collection-&gt;findOne(['_id' =&gt; '94301']);

var_dump($document);
</code></pre>

<p>The above example would output something similar to:</p>
<pre><code>object(MongoDB\Model\BSONDocument)#13 (1) {
  [&quot;storage&quot;:&quot;ArrayObject&quot;:private]=&gt;
  array(5) {
    [&quot;_id&quot;]=&gt;
    string(5) &quot;94301&quot;
    [&quot;city&quot;]=&gt;
    string(9) &quot;PALO ALTO&quot;
    [&quot;loc&quot;]=&gt;
    object(MongoDB\Model\BSONArray)#12 (1) {
      [&quot;storage&quot;:&quot;ArrayObject&quot;:private]=&gt;
      array(2) {
        [0]=&gt;
        float(-122.149685)
        [1]=&gt;
        float(37.444324)
      }
    }
    [&quot;pop&quot;]=&gt;
    int(15965)
    [&quot;state&quot;]=&gt;
    string(2) &quot;CA&quot;
  }
}
</code></pre>

<p>Most methods that read data from MongoDB support a &ldquo;typeMap&rdquo; option, which
allows control over how BSON is converted to PHP. If desired, this option can be
used to return everything as a PHP array, as was done in the legacy<a href="http://php.net/mongo">mongo extension</a>:</p>
<pre><code>&lt;?php

$collection = (new MongoDB\Client)-&gt;demo-&gt;zips;

$document = $collection-&gt;findOne(
    ['_id' =&gt; '94301'],
    ['typeMap' =&gt; ['root' =&gt; 'array', 'document' =&gt; 'array', 'array' =&gt; 'array']]
);

var_dump($document);
</code></pre>

<p>The above example would output something similar to:</p>
<pre><code>array(5) {
  [&quot;_id&quot;]=&gt;
  string(5) &quot;94301&quot;
  [&quot;city&quot;]=&gt;
  string(9) &quot;PALO ALTO&quot;
  [&quot;loc&quot;]=&gt;
  array(2) {
    [0]=&gt;
    float(-122.149685)
    [1]=&gt;
    float(37.444324)
  }
  [&quot;pop&quot;]=&gt;
  int(15965)
  [&quot;state&quot;]=&gt;
  string(2) &quot;CA&quot;
}
</code></pre>

<h3 id="finding-many-documents">Finding Many Documents<a class="headerlink" href="#finding-many-documents" title="Permanent link">&para;</a></h3>
<p>The <a href="../../classes/collection/#find">find()</a> method returns a <a href="http://php.net/mongodb-driver-cursor">MongoDB\Driver\Cursor</a> object,
which may be iterated upon to access all matched documents.</p>
<pre><code>&lt;?php

$collection = (new MongoDB\Client)-&gt;demo-&gt;zips;

$cursor = $collection-&gt;find(['city' =&gt; 'JERSEY CITY', 'state' =&gt; 'NJ']);

foreach ($cursor as $document) {
    echo $document['_id'], &quot;\n&quot;;
}
</code></pre>

<p>The above example would output something similar to:</p>
<pre><code>07302
07304
07305
07306
07307
07310
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../commands/" class="btn btn-neutral float-right" title="Database Commands"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../upgrade-guide/" class="btn btn-neutral" title="Upgrade Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../upgrade-guide/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../commands/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
